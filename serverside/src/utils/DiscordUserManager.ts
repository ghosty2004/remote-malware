import { User } from "discord.js";

const DiscordUsers: DiscordUserManager[] = [];

class DiscordUserManager {
    public user: User;
    private variables: Map<string, any> = new Map();

    constructor(user: User) {
        this.user = user;
        DiscordUsers.push(this);
    }

    public setVariable(key: string, value: any) {
        this.variables.set(key, value);
    }

    public getVariable(key: string) {
        return this.variables.get(key);
    }
};

export const getDiscordUserHandler = (user: User) => {
    return DiscordUsers.find(f => f.user === user) || new DiscordUserManager(user);
};